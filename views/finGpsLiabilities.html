<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-content" ng-controller="finGpsLiabilitiesCtrl" data-ng-init="init()">
                    <form class="form-horizontal" role="form" name="finGpsLiabilities" id="finGpsLiabilitiesForm"
                          novalidate>
                        <div ng-show="addLiabilities">
                            <div class="form-group required" ng-show="liabilitiesList.length == 0">
                                <label class="control-label col-sm-4">Do you have any Loans?</label>
                                <div class="col-sm-5">
                                    <label class="checkbox-inline" for="loan_yes">
                                        <input icheck id="loan_yes" type="radio" name="loan"
                                               ng-model="finGpsLiabilitiesForm.isLoan" value="yes">
                                        Yes
                                    </label>
                                    <label class="checkbox-inline" for="loan_no">
                                        <input icheck id="loan_no" type="radio" name="loan"
                                               ng-model="finGpsLiabilitiesForm.isLoan" value="no">
                                        No
                                    </label>
                                </div>
                            </div>
                            <div ng-show="finGpsLiabilitiesForm.isLoan == 'yes'">

                                <div class="form-group required"
                                     ng-class="{'has-error':finGpsLiabilities.type.$invalid && finGpsLiabilities.type.$dirty }">
                                    <label class="control-label col-sm-4" for="type">Type</label>
                                    <div class="col-sm-5">
                                        <select id="type" class="form-control"
                                                name="type"
                                                ng-required="finGpsLiabilitiesForm.isLoan == 'yes'"
                                                ng-model="finGpsLiabilitiesForm.liabilitiesType">
                                            <option value=''>---------------------Select Type--------------------
                                            </option>
                                            <option ng-repeat="(key,value) in loanList" value="{{key}}">{{value}}
                                            </option>
                                        </select>
                                        <div ng-show="finGpsLiabilities.type.$invalid && finGpsLiabilities.type.$dirty">
                                            <p ng-show="finGpsLiabilities.type.$error.required" class="help-block">
                                                Loan type is required
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!--Holder-->
                                <div class="form-group required"
                                     ng-class="{'has-error':finGpsLiabilities.holder.$invalid && finGpsLiabilities.holder.$dirty }">
                                    <label class="control-label col-sm-4" for="holder">Holder</label>
                                    <div class="col-sm-5">
                                        <select id="holder" class="form-control"
                                                name="holder"
                                                ng-required="finGpsLiabilitiesForm.isLoan == 'yes'"
                                                ng-model="finGpsLiabilitiesForm.holder">
                                            <option value=''>---------------------Select Holder--------------------
                                            </option>
                                            <option value="self">Self</option>
                                            <option value="spouse">Spouse</option>
                                            <option value="joint">Joint</option>
                                        </select>
                                        <div ng-show="finGpsLiabilities.holder.$invalid && finGpsLiabilities.holder.$dirty">
                                            <p ng-show="finGpsLiabilities.holder.$error.required" class="help-block">
                                                Holder is required
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!--Lender-->
                                <div class="form-group">
                                    <label class="control-label col-sm-4" for="lender">Lender</label>
                                    <div class="col-sm-5">
                                        <input type="text" class="form-control"
                                               id="lender"
                                               name="finGpsLiabilitiesForm.lender"
                                               placeholder="Enter lender name"
                                               ng-model="finGpsLiabilitiesForm.lender"
                                        >
                                    </div>
                                </div>
                                <!-- Loan Amount-->
                                <div class="form-group required"
                                     ng-class="{'has-error':finGpsLiabilities.loanAmount.$invalid && finGpsLiabilities.loanAmount.$dirty }">
                                    <label class="control-label col-sm-4" for="loanAmount">Loan Amount</label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control"
                                               id="loanAmount"
                                               name="loanAmount"
                                               placeholder="Enter loan amount"
                                               ng-model="finGpsLiabilitiesForm.loanAmount"
                                               ng-required="finGpsLiabilitiesForm.isLoan == 'yes'"
                                               min="100"
                                               max="500000000"
                                        >
                                        <div ng-show="finGpsLiabilities.loanAmount.$invalid && finGpsLiabilities.loanAmount.$dirty">
                                            <p ng-show="finGpsLiabilities.loanAmount.$error.required"
                                               class="help-block">
                                                Loan amount is required
                                            </p>
                                            <p ng-show="finGpsLiabilities.loanAmount.$error.min" class="help-block">
                                                Loan amount cannot be lower than Rs.100
                                            </p>
                                            <p ng-show="finGpsLiabilities.loanAmount.$error.max" class="help-block">
                                                Loan amount cannot be greater than 50 Crores
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!--Start Date-->
                                <div class="form-group">
                                    <label class="control-label col-sm-4">Start date </label>
                                    <div class="col-sm-5">
                                        <input type="datetime" id="startYear" class="form-control" name="startDate"
                                               ng-model="finGpsLiabilitiesForm.startDate"
                                               placeholder="Purchase date"
                                               date-time
                                               max-date='todayDate'
                                               view="date" auto-close="true" min-view="date" format="YYYY-MM-DD"
                                        />
                                    </div>
                                </div>
                                <!--Principal Outstanding-->
                                <div class="form-group required"
                                     ng-class="{'has-error':finGpsLiabilities.principalOutstanding.$invalid && finGpsLiabilities.principalOutstanding.$dirty }">
                                    <label class="control-label col-sm-4" for="principalOutstanding">Principal
                                        Outstanding</label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control"
                                               id="principalOutstanding"
                                               name="principalOutstanding"
                                               placeholder="Enter loan amount"
                                               ng-required="finGpsLiabilitiesForm.isLoan == 'yes'"
                                               ng-model="finGpsLiabilitiesForm.principleOutstanding"
                                               min="100"
                                               max="500000000"
                                        >
                                        <div ng-show="finGpsLiabilities.principalOutstanding.$invalid && finGpsLiabilities.principalOutstanding.$dirty">
                                            <p ng-show="finGpsLiabilities.principalOutstanding.$error.required"
                                               class="help-block">
                                                Amount is required
                                            </p>
                                            <p ng-show="finGpsLiabilities.principalOutstanding.$error.min"
                                               class="help-block">
                                                Amount cannot be lower than Rs.100
                                            </p>
                                            <p ng-show="finGpsLiabilities.principalOutstanding.$error.max"
                                               class="help-block">
                                                Amount cannot be greater than 50 Crores
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!-- Interest rate-->
                                <div class="form-group"
                                     ng-class="{'has-error':finGpsLiabilities.interestRate.$invalid && finGpsLiabilities.interestRate.$dirty }">
                                    <label class="control-label col-sm-4" for="interestRate">Interest rate</label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control"
                                               id="interestRate"
                                               name="interestRate"
                                               placeholder="Enter loan amount"
                                               ng-model="finGpsLiabilitiesForm.interest"
                                               min="1"
                                               max="50"
                                        >
                                        <div ng-show="finGpsLiabilities.interestRate.$invalid && finGpsLiabilities.interestRate.$dirty">
                                            <p ng-show="finGpsLiabilities.interestRate.$error.min" class="help-block">
                                                Interest rate cannot be lower than 1%
                                            </p>
                                            <p ng-show="finGpsLiabilities.interestRate.$error.max" class="help-block">
                                                Interest rate cannot be greater than 50%
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!--EMI-->
                                <div class="form-group"
                                     ng-class="{'has-error':finGpsLiabilities.emi.$invalid && finGpsLiabilities.emi.$dirty }">
                                    <label class="control-label col-sm-4" for="emi">EMI</label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control"
                                               id="emi"
                                               name="emi"
                                               placeholder="Enter loan amount"
                                               ng-model="finGpsLiabilitiesForm.emi"
                                               min="100"
                                               max="500000000"
                                        >
                                        <div ng-show="finGpsLiabilities.emi.$invalid && finGpsLiabilities.emi.$dirty">
                                            <p ng-show="finGpsLiabilities.emi.$error.min" class="help-block">
                                                Amount cannot be lower than Rs.100
                                            </p>
                                            <p ng-show="finGpsLiabilities.emi.$error.max" class="help-block">
                                                Amount cannot be greater than 50 Crores
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!-- Tenure-->
                                <div class="form-group required"
                                     ng-class="{'has-error':finGpsLiabilities.tenure.$invalid && finGpsLiabilities.tenure.$dirty }">
                                    <label class="control-label col-sm-4" for="emi">Tenure(Months)</label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control"
                                               id="tenure"
                                               name="tenure"
                                               placeholder="Enter tenure"
                                               ng-model="finGpsLiabilitiesForm.tenure"
                                               ng-required="finGpsLiabilitiesForm.isLoan == 'yes'"
                                               min="1"
                                               max="360"
                                        >
                                        <div ng-show="finGpsLiabilities.tenure.$invalid && finGpsLiabilities.tenure.$dirty">
                                            <p ng-show="finGpsLiabilities.tenure.$error.required" class="help-block">
                                                Tenure is required
                                            </p>
                                            <p ng-show="finGpsLiabilities.tenure.$error.min" class="help-block">
                                                Tenure cannot be lower than 1 day
                                            </p>
                                            <p ng-show="finGpsLiabilities.tenure.$error.max" class="help-block">
                                                Tenure cannot be greater than 360 days
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!--Remaining term -->
                                <div class="form-group"
                                     ng-class="{'has-error':finGpsLiabilities.remainingTerm.$invalid && finGpsLiabilities.remainingTerm.$dirty }">
                                    <label class="control-label col-sm-4" for="remainingTerm">Remaining term </label>
                                    <div class="col-sm-5">
                                        <input type="number" class="form-control"
                                               id="remainingTerm"
                                               name="remainingTerm"
                                               placeholder="Enter tenure"
                                               ng-model="finGpsLiabilitiesForm.remainingTerm"
                                               min="1"
                                               max="360"
                                        >
                                        <div ng-show="finGpsLiabilities.remainingTerm.$invalid && finGpsLiabilities.remainingTerm.$dirty">
                                            <p ng-show="finGpsLiabilities.remainingTerm.$error.min" class="help-block">
                                                Remaining term cannot be lower than 1 day
                                            </p>
                                            <p ng-show="finGpsLiabilities.remainingTerm.$error.max" class="help-block">
                                                Remaining term cannot be greater than 360 days
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="_id" name="_id" ng-model="finGpsLiabilitiesForm._id"/>
                                <!--What is this use for ?? ask sir -->
                                <div class="form-group" style="text-align: center;">
                                    <button class="btn btn-sm btn-primary"
                                            ng-disabled="finGpsLiabilitiesForm.$invalid  || !formEditable"
                                            type="submit" ng-click="submitAdditionalLiabilities()"><strong>Save</strong>
                                    </button>
                                    <button class="btn btn-sm btn-primary"
                                            ng-click="cancelLiabilities()"><strong>Cancel</strong></button>
                                </div>
                            </div>
                        </div>
                        <div ng-hide="addLiabilities">
                            <table class="table table-striped table-bordered">
                                <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>Holder</th>
                                    <th>Principal Outstanding</th>
                                    <th>Start date</th>
                                    <th>Tenure (Months)</th>
                                    <th>Action</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="liabilities in liabilitiesList">
                                    <td>{{ liabilities.liabilitiesType }}</td>
                                    <td>{{ liabilities.holder }}</td>
                                    <td>{{ liabilities.principleOutstanding }}</td>
                                    <td>{{ liabilities.startDate }}</td>
                                    <td>{{ liabilities.tenure }}</td>

                                    <td>
                                        <a ng-click="edit(liabilities._id)">edit</a> |
                                        <a ng-click="delete(liabilities._id)">delete</a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="text-center">
                                <button ng-hide="formStatus || liabilitiesList.length == 8"
                                        ng-disabled="!formEditable"
                                        class="btn btn-sm btn-primary goal-button-margin"
                                        ng-click="addFinGpsLiabilities()">
                                    <strong>Add more Loans</strong></button>
                            </div>
                        </div>
                        <!--Outstanding balance on Credit card-->
                        <div class="form-group required">
                            <label class="control-label col-sm-4">Have any Outstanding balance on Credit
                                card?</label>
                            <div class="col-sm-5">
                                <label class="checkbox-inline" for="outstanding_yes">
                                    <input icheck id="outstanding_yes" type="radio" name="outstandingBalance"
                                           ng-model="finGpsLiabilitiesForm.isOutstanding" value="yes">
                                    Yes
                                </label>
                                <label class="checkbox-inline" for="outstanding_no">
                                    <input icheck id="outstanding_no" type="radio" name="outstandingBalance"
                                           ng-model="finGpsLiabilitiesForm.isOutstanding" value="no">
                                    No
                                </label>
                            </div>
                        </div>
                        <!--Self-->
                        <div ng-show="finGpsLiabilitiesForm.isOutstanding =='yes'">
                            <div class="form-group"
                                 ng-class="{'has-error':finGpsLiabilities.selfOutstandingBalance.$invalid && finGpsLiabilities.selfOutstandingBalance.$dirty }">
                                <label class="control-label col-sm-4" for="selfOutstandingBalance">Self</label>
                                <div class="col-sm-5">
                                    <input type="number" class="form-control"
                                           id="selfOutstandingBalance"
                                           name="selfOutstandingBalance"
                                           placeholder="Enter amount"
                                           ng-model="finGpsLiabilitiesForm.selfOutstandingBalance"
                                           min="100"
                                           max="500000000 "
                                    >
                                    <div ng-show="finGpsLiabilities.selfOutstandingBalance.$invalid && finGpsLiabilities.selfOutstandingBalance.$dirty">
                                        <p ng-show="finGpsLiabilities.selfOutstandingBalance.$error.min"
                                           class="help-block">
                                            Self outstanding balance cannot be less than Rs 100
                                        </p>
                                        <p ng-show="finGpsLiabilities.selfOutstandingBalance.$error.max"
                                           class="help-block">
                                            Self outstanding balance cannot be greater than 50 crores
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <!--self-->
                            <div class="form-group"
                                 ng-class="{'has-error':finGpsLiabilities.spouseOutstandingBalance.$invalid && finGpsLiabilities.spouseOutstandingBalance.$dirty }">
                                <label class="control-label col-sm-4" for="spouseOutstandingBalance">Spouse</label>
                                <div class="col-sm-5">
                                    <input type="number" class="form-control"
                                           id="spouseOutstandingBalance"
                                           name="spouseOutstandingBalance"
                                           placeholder="Enter amount"
                                           ng-model="finGpsLiabilitiesForm.spouseOutstandingBalance"
                                           min="100"
                                           max="500000000 "
                                    >
                                    <div ng-show="finGpsLiabilities.spouseOutstandingBalance.$invalid && finGpsLiabilities.spouseOutstandingBalance.$dirty">
                                        <p ng-show="finGpsLiabilities.spouseOutstandingBalance.$error.min"
                                           class="help-block">
                                            Spouse outstanding balance cannot be less than Rs 100
                                        </p>
                                        <p ng-show="finGpsLiabilities.spouseOutstandingBalance.$error.max"
                                           class="help-block">
                                            Spouse outstanding balance cannot be greater than 50 crores
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group"
                             ng-class="{ 'has-error' : finGpsLiabilities.userComment.$invalid && finGpsLiabilities.userComment.$dirty }">
                            <label class="control-label col-sm-5" for="UserComment">Any Additional comments</label>
                            <div class="col-sm-7">
                                <textarea rows="4" cols="48" name="userComment" id="userComment"
                                          ng-minlength="1" ng-maxlength="250"
                                          ng-model="finGpsLiabilitiesForm.comment"
                                          placeholder="More to tell? We would like to hear from you!"
                                >
                                </textarea>
                                <div ng-show="finGpsLiabilities.userComment.$invalid && finGpsLiabilities.userComment.$dirty">
                                    <p ng-show="finGpsLiabilities.userComment.$error.maxlength" class="help-block">
                                        Comments cannot exceed 250 characters
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" style="text-align: center;">
                            <button class="btn btn-sm btn-primary"
                                    ng-disabled="finGpsLiabilitiesForm.$invalid  || !formEditable"
                                    ng-click="submitFinGpsLiabilities()"><strong>Save</strong>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .form-group {
        margin-top: 20px !important;
    }
</style>